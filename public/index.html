<!DOCTYPE html>
<html>
    <head>
        <title>Imageboard</title>
        <link rel="stylesheet" href="/css/styles.css" />
        <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Baloo+Tamma+2:wght@400;600&display=swap" rel="stylesheet">
        <script type="module" src="https://unpkg.com/ionicons@5.0.0/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule="" src="https://unpkg.com/ionicons@5.0.0/dist/ionicons/ionicons.js"></script>
    </head>

    <body>
        <h1>-> Graffiti & Street Art *</h1>
        
        <!-- ///////////////////// INSIDE OF MAIN DIV ///////////////////// -->
        <div id="main">

            <!-- ///////// INPUT FIELDS ///////// -->

            <form id="inputfields" action="">
                
                <div class="flexbox">
                    
                    <div>
                        <ion-icon class="icon" name="information-circle-outline"></ion-icon>
                        <input id="title" v-model="title" type="text" maxlength="24" name="title" placeholder= "title">
                    </div>

                    <div>
                        <ion-icon class="icon" name="create-outline"></ion-icon>
                        <input id="description" v-model="description" type="text" maxlength="40" name="description" placeholder= "description">
                    </div>

                </div>
                
                <div class="flexbox">

                    <div>
                        <ion-icon class="icon" name="person-circle-outline"></ion-icon>
                        <input id="username" v-model="username" type="text" maxlength="24" name="username" placeholder= "username">
                    </div>
                
                    <div>
                         <ion-icon class="icon" name="cloud-upload-outline"></ion-icon>
                        <input id="inputfile" @change="handleChange" type="file" required name="file" ref="file" accept="image/*" />
                    </div>

                </div>

                <button @click="uploadButtonClick">upload</button>

            </form>


            <!-- ///////// RENDERING IMAGES + TITLES ///////// -->
            <div class="image" v-for="image in images" v-if="images.length" >
                <a :href="'#' + image.id">
                    <img class="cover" :src="image.url" :alt="image.description" />
                    <figcaption id="img-title" for=image>{{ image.title }}</figcaption>
                </a>
            </div>
            <!-- @click="selectedImage = image.id" -->
            <div id="get-more-images">
                <button id="more-button" v-if="moreImages" @click="loadMoreButton">more</button>
                <div class="placeholder"></div>
            </div>

            <!-- ///////// MODAL COMPONENT INSIDE MAIN DIV ///////// -->
            
            <modal-component
            v-if="selectedImage"
            :id="selectedImage"
            @close="closeModal">
            </modal-component>
        
        </div>


        <!-- ///////////////////// OUTSIDE OF MAIN DIV ///////////////////// -->

        <!-- ///////// MODAL COMPONENT OUTSIDE "MAIN" DIV ///////// -->
        <!-- template for "modal-component" inside the main div: -->
        <!-- "modal-template" = name of template in Vue.component -->
        <script type="text/x-template" id="modal-template">
            <div class="component">
                
                <div id="modal-upper-left">
                    <img id="img-modal" :src="image.url" :alt="image.description">
                    <div id="left"><a :href="'#' + (image.id + 1)"><</a></div>
                </div>
                <!-- <div id="left" v-if="left_id"><a :href="'#' + left_id"><</a></div> -->
                
                <div class="comments">

                    <p id="x" @click="closeModal">X</p>

                    <h2>Props</h2>

                    <div>
                        <div>
                            <ion-icon class="props-icon" name="create-outline"></ion-icon>
                            <input class="props-input" v-model="comment" type="text" maxlength="40" name="comment" placeholder= "props">
                        </div>

                        <div>
                            <ion-icon class="props-icon" name="person-circle-outline"></ion-icon>
                            <input class="props-input" v-model="username" type="text" maxlength="24" name="username" placeholder= "username">
                        </div>

                        <button id="props-button" @click="postComment">submit</button>
                    </div>

                    <div class="props-container" v-for="comment in comments" v-if="comments.length">
                        <p class="props-commenter">"{{ comment.comment }}"</p>
                        
                        <div class="flexbox-modal">
                            <ion-icon class="icon-props" name="person-circle-outline"></ion-icon>
                            <p class="props-commenter-thin">{{ comment.username }}</p>
                            <ion-icon class="icon-props distance" name="calendar-outline"></ion-icon>
                            <p class="props-commenter-thin">{{ comment.created_at }}</p>
                        </div>

                    </div>

                    <div id="right"><a :href="'#' + (image.id - 1)">></a></div>
                    <!-- <div id="right" v-if="right_id"><a :href="'#' + right_id">></a></div> -->

                </div>

                <div id="image-info">
                    <div class="flexbox-modal">
                        <ion-icon class="icon-modal" name="information-circle-outline"></ion-icon>
                        <figcaption class="img-title-modal"><b>Title:</b> {{ image.title }}</figcaption>
                    </div>

                    <div class="flexbox-modal">
                        <ion-icon class="icon-modal" name="create-outline"></ion-icon>
                        <p class="img-modal-description"><b>Description:</b> {{ image.description }}</p>
                    </div>

                    <div class="flexbox-modal">
                        <ion-icon class="icon-modal" name="person-circle-outline"></ion-icon>
                        <p class="img-modal-username"><b>Uploaded by:</b> {{ image.username }}</p>
                    </div>
                        
                    <div class="flexbox-modal">
                        <ion-icon class="icon-modal" name="calendar-outline"></ion-icon>
                        <p class="img-modal-date"><b>Date:</b> {{ image.created_at }}</p>
                    </div>

                </div>

            </div>
        </script>


        <script src="/js/vue.js"></script>
        <script src="/js/axios.min.js"></script>
        <script src="/js/script.js"></script>

    </body>
</html>
